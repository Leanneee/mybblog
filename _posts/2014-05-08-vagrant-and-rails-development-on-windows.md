---
title: Rails on Vagrant или 6 простых шагов чтобы начать разработку на Rails в Windows
permalink: /ru/vagrant-and-rails-development-on-windows/
categories: ['Ruby', 'Туториалы']
tags: ['ruby', 'vagrant']

---
Вопреки всем доводам о том, что разработка Rails приложения в Windows не очень комфортная, решил написать этот пост, который поможет новичкам быстро прийти в мир Rails не травмируя свою психику изучением linux, настройкой окружения под него и рядом других задач, отнимающих много времени и сил.  
<!--more-->

  
Итак, если у вас Windows машина и дикое желание попробовать Rails прямо сейчас, то я покажу всего 6 шагов, совершив которые вы будете лицезреть свое первое приложение по адресу <http://localhost:3000/>.

* * *

### Шаг 1-й 

#### Установка Virtualbox 

Virtualbox пригодится нам для запуска виртуальной машины с Ruby on Rails окружением для разработки.

Установка:  
Переходим по адресу:  
https://www.virtualbox.org/wiki/Downloads
Выбираем  
«VirtualBox 5.0 for Windows hosts x86/amd64»  
Скачиваем, устанавливаем.

* * *

### Шаг 2-й 

#### Установка Vagrant 

Vagrant — это очень крутая штука, серьезно упрощающая работу с виртуальными машинами. Подробнее о нем вы можете на офф сайте: [www.vagrantup.com/][1]

Возможности vagrant, которые мы будем использовать сегодня — создание и настройка виртуальной машины, автоматический проброс портов и создание общих папок.

Установка:  
Переходим по адресу:  
http://www.vagrantup.com/downloads
Выбираем: «WINDOWS Universal (32 and 64-bit)»  
Скачиваем, устанавливаем.

* * *

### Шаг 3-й 

#### Скачивание настроенного под Rails vagrant-box’а

В сообществе Vagrant все время появляются новые сборки конфигураций виртуальных машин. Да вы и сами можете сделать свою сборку. Я же предлагаю использовать вот эту сборку: <https://vagrantcloud.com/leopard/rwprecise64>

Далее, создаем папку rails-box и инициализируем нашу виртуальную машину.  
Для этого нужно открыть командную строку и, находясь в папке rails-box, выполнить следующие команды:

Инициализация виртуальной машины:

```bash
> vagrant init leopard/rwprecise64
```

После запуска этой команды создастся конфигурационный файл Vagrantfile в корне нашей папки. Он нам пригодится в дальнейшем.

Запуск виртуальной машины:

```bash
 > vagrant up
```

Эта команда проверяет наличие установленных виртуальных машин в Virtualbox и, при их отсутствии скачивает, устанавливает и настраивает новую виртуальную машину согласно Vagrantfile. После чего виртуальная машина запускается и работает до перезапуска вашего компьютера.

* * *

### Шаг 4-й 

#### SSH доступ к машине 

Для доступа и работы с виртуальной машиной я рекомендую клиент [PuTTY][2]  
В особой настройке эта программа не нуждается, нужно лишь указать IP адрес(127.0.0.1), порт(2222) и нажать Open.  
Перед вами откроется консоль. Логин и пароль которые нужно будет ввести: vagrant, vagrant.  
На свое усмотрение вы можете настроить авторизацию по ssh ключу, тогда пароль и и логины вводить не придется.

* * *

### Шаг 5-й 

#### Общие папки.

Предпоследний шаг, который нам осталось сделать — создать папку в которой мы будем хранить проекты и синхронизировать ее с виртуальной машиной, другими словами — просто сделать общую папку.

Открываем конфигурационный файл Vagrantfile и добавляем туда строку:

```ruby
config.vm.synced_folder "../projects/", "/home/vagrant/projects"
```

`config.vm.synced_folder\` — принимает 2 параметра: локальную папку и папку на виртуальной машине, которые нужно связать. Путь к локальной папке относительный, то есть папка projects находится на один уровень выше чем rails-box. После сохранения файла перезапустим виртуальную машину:

```bash
> vagrant reload
```

Заново запускаем PuTTY и проверяем, работает ли все это:

```bash
$ ls
postinstall.sh  projects
```

Отлично! Перейдем в папку projects и создадим там пустой файл:

```bash
$ cd projects/
$ touch sample.txt
$ ls
sample.txt
```

Теперь смотрим наличие sample.txt в папке с проектами в Windows. Если файл присутствует, то 5-й шаг мы сделали правильно! У нас остался последний шаг, сделав который, мы уже сможем лицезреть rails приложение у себя в браузере.

* * *

### Шаг 6-й 

#### Установка Rails и создание первого приложения 

Находясь в PuTTY устанавливаем rails:

```bash
$ gem install rails
```

Далее переходим в папку projects, создаем новое приложение и запускаем сервер:

```bash
$ cd projects
$ rails new sampleapp
$ cd sampleapp
$ rails s
```

После чего в адресной строке любимого браузера набираем http://localhost:3000/ и видим приветственную страницу пустого Rails приложения.

Если вы видите такую страницу, то поздравляю вас — вы совершили 5 нелегких шагов, чтобы приблизить себя к разработке на замечательном фреймворке Ruby on Rails. Теперь вам остается открыть папку с проектом в любимом редакторе и начать разработку вашего приложения.


 [1]: http://www.vagrantup.com/
 [2]: http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html
 [3]: http://www.askvg.com/enable-open-command-window-here-option-in-context-menu-in-windows-vista/
